extends layout

prepend title
  unless path
    - path = 'search';
  unless title
    - title = 'Joinable';
  unless uname
    - uname = user.username;
  - gamename = title;
  - self = (uname===user.username); 
  if !self
    - path = path + '/' + user.username 
    

mixin pages
  if count > 1
    nav(aria-label="Page navigation")
      ul.pagination
        li.page-item
          a.page-link(href='/'+path+'/1') #{t('first_page')}
        - for(let i=Math.max(2,page-3); i<Math.min(page+4,count); ++i) {
          li.page-item
            if page === i
              a(class="page-link disabled" href='#') #{i}
            else
              a.page-link(href='/'+path+'/'+i) #{i}
        - }
        li.page-item
          a.page-link(href='/'+path+'/'+(count)) #{t('last_page')}

block content
  div.content
    if self
      //- TODO: navigation (active, search, archived)
      div.btn-group
        a.btn.btn-info(href='/active')
          span(class="fa fa-gamepad")
          |
          | #{t('active_games')}
        a.btn.btn-info(href='/search')
          span(class="fa fa-door-open")
          |
          | #{t('joinable_games')}
        a.btn.btn-info.btn-outline-dark(href='/archive')
          span(class="fa fa-archive")
          |
          | #{t('archived_games')}
    
    +pages

    if games && Object.keys(games).length > 0
      - let gamesarray = games
      include gamestable
    else
      h3 #{t('none_found')}

    +pages
    
    div
      a(class="btn btn-primary" href="/create") #{t('create_new')}
      
